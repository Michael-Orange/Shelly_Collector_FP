Les 0V sont des artefacts (micro-coupures, latence mesure, etc.) qui polluent la moyenne.
ğŸ“‹ BRIEF POUR REPLIT (Correction calcul voltage)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ FIX : Calcul voltage moyen â†’ Filtrer 0 et utiliser MÃ‰DIANE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ PROBLÃˆME
Le calcul de voltage moyen est faussÃ© par les valeurs Ã  0V
â†’ Moyenne = 114V au lieu de 230V

ğŸ“Œ SOLUTION
1. Filtrer les valeurs aberrantes (< 180V ou > 260V)
2. Utiliser la MÃ‰DIANE au lieu de la MOYENNE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ BACKEND - CYCLE DETECTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Dans detect_cycles() (ou Ã©quivalent) :

AVANT (buguÃ©) :
```python
# Calcul voltage moyen
voltage_values = [row['voltage'] for row in data]
avg_voltage = np.mean(voltage_values) if voltage_values else None
APRÃˆS (corrigÃ©) :
# Filtrer valeurs aberrantes (exclure 0V et valeurs hors plage normale)
voltage_values = [
    v for v in [row['voltage'] for row in data]
    if v is not None and 180 <= v <= 260
]

# Utiliser la MÃ‰DIANE au lieu de la moyenne
if voltage_values:
    median_voltage = round(np.median(voltage_values), 1)
else:
    median_voltage = None

cycle = {
    ...
    "voltage_v": median_voltage,  # âœ… MÃ‰DIANE
    ...
}
Explication :
180V â‰¤ v â‰¤ 260V â†’ Filtre les 0V, valeurs nulles, et aberrations
np.median() â†’ RÃ©sistant aux outliers
round(..., 1) â†’ 1 dÃ©cimale
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š EXEMPLE CALCUL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DonnÃ©es brutes voltage pendant le cycle :
[230, 231, 0, 229, 0, 230, 0, 232, 228, 231, 0, 230]
AprÃ¨s filtrage (180 â‰¤ v â‰¤ 260) :
[230, 231, 229, 230, 232, 228, 231, 230]
Tri pour mÃ©diane :
[228, 229, 230, 230, 230, 231, 231, 232]
MÃ©diane (8 valeurs, nombre pair) :
(230 + 230) / 2 = 230.0V âœ…
Si on avait gardÃ© les 0 (MOYENNE) :
(230 + 231 + 0 + 229 + 0 + 230 + 0 + 232 + 228 + 231 + 0 + 230) / 12 = 144.3V âŒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST POST-BUILD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Backend :
â˜ Filtrage : 180 â‰¤ voltage â‰¤ 260
â˜ Calcul : np.median() au lieu de np.mean()
â˜ Format : round(..., 1)
â˜ Gestion cas vide : None si aucune valeur valide
Tests :
â˜ Cycle 2 min â†’ voltage_v â‰ˆ 230V (pas 114V)
â˜ Cycle avec beaucoup de 0V â†’ mÃ©diane toujours ~230V
â˜ Si toutes valeurs < 180V ou > 260V â†’ None (affiche "-")
Frontend :
â˜ Affichage inchangÃ© (dÃ©jÃ  prÃ©vu pour gÃ©rer None)
â˜ Format XXX.X V
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ POURQUOI LA MÃ‰DIANE ?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MOYENNE (sensible aux outliers) :
[230, 230, 230, 230, 0, 0] â†’ 153V âŒ
MÃ‰DIANE (robuste) :
[0, 0, 230, 230, 230, 230] â†’ 230V âœ…
La mÃ©diane reprÃ©sente la "valeur typique" mÃªme si quelques mesures sont aberrantes.
CohÃ©rent avec ce qui a Ã©tÃ© fait pour puissance et intensitÃ© dans le bandeau stats.

---

## ğŸ¯ RÃ‰SUMÃ‰

**ProblÃ¨me** : Moyenne = 114V Ã  cause des 0V

**Solution** :
1. âœ… Filtrer : `180 <= voltage <= 260`
2. âœ… MÃ‰DIANE : `np.median(voltage_values)`

**RÃ©sultat attendu** : ~230V âœ…

MODIFICATIONS : Bandeau statistiques format Prop 1 (Cartes 2Ã—2)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ OBJECTIF
1. Remplacer "moyenne" par "mÃ©diane" pour Puissance et IntensitÃ©
2. Clarifier les labels (ajouter "par cycle", "mÃ©diane", "Plage:")
3. Restructurer l'affichage en format 2Ã—2

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ FRONTEND - DASHBOARD (web/dashboard.py)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A. NOUVEAU HTML (REMPLACER le bandeau stats actuel)
----------------------------------------------------

```html
<style>
.stats-card {
    background: linear-gradient(135deg, #2d8659 0%, #1e5d3f 100%);
    border-radius: 12px;
    padding: 25px 30px;
    margin-bottom: 30px;
    color: white;
    box-shadow: 0 8px 25px rgba(45, 134, 89, 0.4);
}

.stats-card h3 {
    margin: 0 0 20px 0;
    font-size: 18px;
    font-weight: 600;
    opacity: 0.95;
    letter-spacing: 0.5px;
}

.stats-separator {
    border: 0;
    border-top: 1px solid rgba(255, 255, 255, 0.25);
    margin: 20px 0;
}

.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
}

.stat-box {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.stat-box-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    opacity: 0.9;
    margin-bottom: 10px;
}

.stat-box-line {
    font-size: 16px;
    line-height: 1.6;
}

.stat-value {
    font-weight: bold;
    font-size: 18px;
}

.stat-subtitle {
    font-size: 13px;
    opacity: 0.85;
}
</style>

<!-- BANDEAU STATISTIQUES (Prop 1) -->
<div class="stats-card">
    <h3>SYNTHÃˆSE DES CYCLES</h3>
    
    <!-- LIGNE 1 : Cycles + DurÃ©e -->
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-box-title">ğŸ“Š CYCLES</div>
            <div class="stat-box-line">
                <span class="stat-value" id="stat-total-cycles">-</span> total
            </div>
            <div class="stat-box-line">
                <span class="stat-value" id="stat-running">-</span> en cours
            </div>
        </div>
        
        <div class="stat-box">
            <div class="stat-box-title">â±ï¸ DURÃ‰E MOYENNE</div>
            <div class="stat-box-line">
                <span class="stat-value" id="stat-avg-duration">-</span>
            </div>
            <div class="stat-subtitle">(par cycle)</div>
        </div>
    </div>
    
    <hr class="stats-separator">
    
    <!-- LIGNE 2 : Puissance + IntensitÃ© -->
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-box-title">ğŸ’ª PUISSANCE (W)</div>
            <div class="stat-box-line">
                <span class="stat-value" id="stat-median-power">-</span> (mÃ©diane)
            </div>
            <div class="stat-box-line stat-subtitle">
                Plage: <span id="stat-power-range">-</span>
            </div>
        </div>
        
        <div class="stat-box">
            <div class="stat-box-title">ğŸ“ˆ INTENSITÃ‰ (A)</div>
            <div class="stat-box-line">
                <span class="stat-value" id="stat-median-ampere">-</span> (mÃ©diane)
            </div>
            <div class="stat-box-line stat-subtitle">
                Plage: <span id="stat-ampere-range">-</span>
            </div>
        </div>
    </div>
</div>
B. JAVASCRIPT : Calcul de la mÃ©diane
Ajouter cette fonction utilitaire :
// Fonction pour calculer la mÃ©diane d'un tableau
function calculateMedian(values) {
    if (values.length === 0) return 0;
    
    // Trier les valeurs
    const sorted = values.slice().sort((a, b) => a - b);
    const mid = Math.floor(sorted.length / 2);
    
    // Si nombre pair de valeurs, prendre la moyenne des 2 valeurs centrales
    if (sorted.length % 2 === 0) {
        return (sorted[mid - 1] + sorted[mid]) / 2;
    } else {
        return sorted[mid];
    }
}
C. JAVASCRIPT : Mise Ã  jour de updateCompactStats()
REMPLACER la fonction updateCompactStats() par :
function updateCompactStats(cycles) {
    // Total cycles
    document.getElementById('stat-total-cycles').textContent = cycles.length;
    
    // Cycles en cours
    const running = cycles.filter(c => !c.end_time).length;
    document.getElementById('stat-running').textContent = running;
    
    // Cycles complÃ©tÃ©s (pour les calculs)
    const completedCycles = cycles.filter(c => c.end_time);
    
    // DurÃ©e moyenne
    const avgDuration = completedCycles.length > 0
        ? Math.round(completedCycles.reduce((sum, c) => sum + c.duration_minutes, 0) / completedCycles.length)
        : 0;
    document.getElementById('stat-avg-duration').textContent = `${avgDuration} min`;
    
    // âœ… MÃ‰DIANE PUISSANCE (au lieu de moyenne)
    const allPowerValues = completedCycles
        .map(c => c.avg_power_w)
        .filter(p => p != null && p > 0);
    
    const medianPower = allPowerValues.length > 0
        ? Math.round(calculateMedian(allPowerValues))
        : 0;
    document.getElementById('stat-median-power').textContent = medianPower;
    
    // âœ… MÃ‰DIANE INTENSITÃ‰ (au lieu de moyenne)
    const allAmpereValues = [];
    completedCycles.forEach(c => {
        if (c.min_ampere != null) allAmpereValues.push(c.min_ampere);
        if (c.max_ampere != null) allAmpereValues.push(c.max_ampere);
    });
    
    const medianAmpere = allAmpereValues.length > 0
        ? calculateMedian(allAmpereValues).toFixed(1)
        : 0;
    document.getElementById('stat-median-ampere').textContent = medianAmpere;
    
    // Plage Puissance (Min - Max)
    const allWatts = cycles.flatMap(c => [c.min_watt, c.max_watt]).filter(w => w != null);
    const minW = allWatts.length > 0 ? Math.round(Math.min(...allWatts)) : '-';
    const maxW = allWatts.length > 0 ? Math.round(Math.max(...allWatts)) : '-';
    document.getElementById('stat-power-range').textContent = `${minW} - ${maxW} W`;
    
    // Plage IntensitÃ© (Min - Max)
    const allAmperes = cycles.flatMap(c => [c.min_ampere, c.max_ampere]).filter(a => a != null);
    const minA = allAmperes.length > 0 ? Math.min(...allAmperes).toFixed(1) : '-';
    const maxA = allAmperes.length > 0 ? Math.max(...allAmperes).toFixed(1) : '-';
    document.getElementById('stat-ampere-range').textContent = `${minA} - ${maxA} A`;
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST POST-BUILD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
HTML/CSS :
â˜ Grid 2Ã—2 avec gap de 30px
â˜ SÃ©parateur horizontal entre lignes
â˜ Emojis : ğŸ“Š â±ï¸ ğŸ’ª ğŸ“ˆ
â˜ Labels clairs : "CYCLES", "DURÃ‰E MOYENNE", "PUISSANCE (W)", "INTENSITÃ‰ (A)"
â˜ Sous-titre "(par cycle)" sous la durÃ©e
â˜ Mention "(mÃ©diane)" aprÃ¨s les valeurs
JavaScript :
â˜ Fonction calculateMedian() ajoutÃ©e
â˜ stat-median-power : MÃ©diane des avg_power_w
â˜ stat-median-ampere : MÃ©diane des min/max amperes
â˜ stat-power-range : "Min - Max W"
â˜ stat-ampere-range : "Min - Max A"
Tests visuels :
â˜ Structure 2Ã—2 bien alignÃ©e
â˜ SÃ©parateur visible entre les 2 lignes
â˜ Labels en gras et uppercase
â˜ Valeurs principales en gros (18px)
â˜ Sous-textes en petit (13px)
â˜ "Plage:" visible et clair
Tests fonctionnels :
â˜ MÃ©diane puissance cohÃ©rente (proche mais diffÃ©rente de la moyenne)
â˜ MÃ©diane intensitÃ© calculÃ©e correctement
â˜ Plages Min-Max identiques Ã  avant
â˜ DurÃ©e moyenne inchangÃ©e
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š EXEMPLE RENDU ATTENDU
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Avec les donnÃ©es de la capture d'Ã©cran :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SYNTHÃˆSE DES CYCLES                                            â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š CYCLES              â±ï¸ DURÃ‰E MOYENNE                         â”‚
â”‚  481 total              8 min                                   â”‚
â”‚  0 en cours             (par cycle)                             â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’ª PUISSANCE (W)       ğŸ“ˆ INTENSITÃ‰ (A)                        â”‚
â”‚  1196 W (mÃ©diane)       5.4 A (mÃ©diane)                         â”‚
â”‚  Plage: 827 - 2061 W    Plage: 3.6 - 10.9 A                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ NOTES TECHNIQUES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CALCUL MÃ‰DIANE PUISSANCE
Prendre avg_power_w de tous les cycles complÃ©tÃ©s
Trier les valeurs
Prendre la valeur centrale (ou moyenne des 2 centrales si nombre pair)
CALCUL MÃ‰DIANE INTENSITÃ‰
Collecter toutes les valeurs min_ampere et max_ampere
Calculer la mÃ©diane de cet ensemble
Alternative : Calculer mÃ©diane(min) et mÃ©diane(max) sÃ©parÃ©ment
POURQUOI LA MÃ‰DIANE ?
RÃ©sistante aux valeurs extrÃªmes (pics de dÃ©marrage)
ReprÃ©sente mieux la "valeur typique" de fonctionnement
Plus stable dans le temps pour dÃ©tecter les dÃ©rives
LABELS EXPLICITES
"par cycle" Ã©vite confusion avec durÃ©e totale
"mÃ©diane" clarifie qu'il ne s'agit pas de la moyenne
"Plage:" explicite que ce sont les extrÃªmes

---

## ğŸ¯ RÃ‰SUMÃ‰ DES CHANGEMENTS

### **Structure** :
- âœ… Grid 2Ã—2 au lieu d'une seule ligne
- âœ… SÃ©parateur horizontal entre les 2 lignes

### **Labels** :
- âœ… "DURÃ‰E MOYENNE" + "(par cycle)"
- âœ… "1196 W (mÃ©diane)" au lieu de "1196 W moy."
- âœ… "Plage: 827 - 2061 W" au lieu de "827 - 2061 W"

### **Calculs** :
- âœ… MÃ©diane puissance (au lieu de moyenne)
- âœ… MÃ©diane intensitÃ© (au lieu de moyenne)
- âœ… Min/Max inchangÃ©s (toujours utiles)

---
PROBLÃˆME IDENTIFIÃ‰ : IncohÃ©rence entre date picker et titre du graphique

OBSERVATIONS :
- Date picker : 17/11/2025
- Titre graphique : 18/02/2026 â€” 19/02/2026 (INCORRECT)
- DonnÃ©es dans le tableau : 17/11/2025 et avant

â†’ Le graphique essaie d'afficher 18/02-19/02 alors que le date picker demande 17/11/2025

ROOT CAUSE : Le titre n'est PAS mis Ã  jour selon la vraie pÃ©riode utilisÃ©e

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SOLUTION 1 : Mettre Ã  jour le titre APRÃˆS chaque chargement de donnÃ©es

Dans loadChartData(), APRÃˆS avoir reÃ§u les donnÃ©es de l'API :

```javascript
async function loadChartData() {
    // ... fetch API ...
    
    const result = await response.json();
    
    // METTRE Ã€ JOUR LE TITRE avec les vraies bornes
    updateChartTitle();
    
    updateChart(result.data);
}
Fonction updateChartTitle() Ã  corriger :
function updateChartTitle() {
    const endDateInput = document.getElementById('chartEndDate');
    const endDate = endDateInput?.value;  // Format YYYY-MM-DD
    
    if (!endDate) return;
    
    // Calculer end_datetime
    const today = new Date().toISOString().split('T')[0];
    let endDateTime;
    
    if (endDate === today) {
        // Aujourd'hui â†’ NOW
        endDateTime = new Date();
    } else {
        // Date passÃ©e â†’ 23:59 de ce jour
        endDateTime = new Date(endDate + 'T23:59:59');
    }
    
    // Calculer start_datetime selon pÃ©riode
    let startDateTime = new Date(endDateTime);
    if (currentPeriod === '24h') {
        startDateTime.setHours(startDateTime.getHours() - 24);
    } else if (currentPeriod === '7d') {
        startDateTime.setDate(startDateTime.getDate() - 7);
    } else { // 30d
        startDateTime.setDate(startDateTime.getDate() - 30);
    }
    
    // Formatter les dates
    const formatDate = (d) => d.toLocaleDateString('fr-FR', { 
        day: '2-digit', 
        month: '2-digit', 
        year: 'numeric' 
    });
    
    // Mettre Ã  jour le titre
    const titleElement = document.querySelector('#chart-section h3') || document.querySelector('.chart-header h3');
    if (titleElement) {
        titleElement.textContent = `ğŸ“Š ActivitÃ© Ã©lectrique`;
    }
    
    // Mettre Ã  jour le sous-titre avec la pÃ©riode
    const subtitleElement = document.querySelector('.date-range');
    if (subtitleElement) {
        subtitleElement.textContent = `${formatDate(startDateTime)} â€” ${formatDate(endDateTime)}`;
    }
}
HTML Ã  vÃ©rifier/ajouter dans la structure :
<div class="chart-header">
    <h3>ğŸ“Š ActivitÃ© Ã©lectrique</h3>
    <p class="date-range">18/02/2026 â€” 19/02/2026</p>
</div>
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SOLUTION 2 : VÃ©rifier que le date picker envoie bien la bonne date
Ajoute un log dans loadChartData() pour confirmer :
const endDate = endDateInput?.value;
console.log('ğŸ” Date picker value:', endDate);
console.log('ğŸ” Today:', new Date().toISOString().split('T')[0]);
console.log('ğŸ” Will send end_date to API:', endDate !== today ? endDate : 'NONE (will use NOW)');
ATTENDU avec date picker Ã  17/11/2025 :
Date picker value: 2025-11-17
Today: 2026-02-19
Will send end_date: 2025-11-17
Titre devrait afficher: 16/11/2025 â€” 17/11/2025
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RÃ‰SUMÃ‰ :
Le problÃ¨me est que le titre affiche "18/02 â€” 19/02" (basÃ© sur NOW) alors que :
Le date picker est Ã  17/11/2025
end_date devrait Ãªtre envoyÃ© Ã  l'API = 2025-11-17
La pÃ©riode devrait Ãªtre 16/11 - 17/11
ImplÃ©mente updateChartTitle() correctement et appelle-la aprÃ¨s chaque chargement.
Donne-moi ensuite :
Le log "Will send end_date to API"
Le titre affichÃ©
Si le graphique affiche maintenant les donnÃ©es du 17/11

 BRIEF FONCTIONNEL : SÃ©lection modÃ¨le de pompe + Gestion des modÃ¨les
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ OBJECTIF
1. Permettre la sÃ©lection du modÃ¨le de pompe depuis l'interface Admin
2. Ajouter une page de gestion des modÃ¨les de pompes (CRUD complet)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š STRUCTURE DE DONNÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ NOUVELLE TABLE : pump_models
----------------------------------
Colonnes :
- id (INTEGER PRIMARY KEY AUTOINCREMENT)
- name (TEXT NOT NULL) â†’ Ex: "Pedrollo VXM 10/35"
- power_kw (REAL NOT NULL) â†’ Ex: 0.75
- current_ampere (REAL NOT NULL) â†’ Ex: 4.8 (intensitÃ© thÃ©orique Ã  230V)
- flow_rate_hmt8 (REAL NULL) â†’ Ex: 18.0 (mÂ³/h Ã  HMT=8, NULL si non applicable)
- created_at (TIMESTAMP DEFAULT CURRENT_TIMESTAMP)

DonnÃ©es initiales Ã  insÃ©rer :
```sql
INSERT INTO pump_models (name, power_kw, current_ampere, flow_rate_hmt8) VALUES
('Pedrollo VXM 10/35', 0.75, 4.8, 18.0),
('Pedrollo DM/8', 0.55, 3.2, NULL);
2ï¸âƒ£ MODIFIER TABLE : channel_config
Ajouter colonne :
pump_model_id (INTEGER NULL REFERENCES pump_models(id))
Migration SQL :
ALTER TABLE channel_config ADD COLUMN pump_model_id INTEGER;
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ BACKEND (FastAPI)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£ ENDPOINT : GET /api/config/pump-models
Retourne la liste de tous les modÃ¨les de pompes disponibles.
Response :
Item 1
Id
1
Name
Pedrollo VXM 10/35
Power Kw
0.75
Current Ampere
4.8
Flow Rate Hmt8
18
Item 2
Id
2
Name
Pedrollo DM/8
Power Kw
0.55
Current Ampere
3.2
Flow Rate Hmt8
empty
2ï¸âƒ£ NOUVEL ENDPOINT : POST /api/config/pump-model
CrÃ©e un nouveau modÃ¨le de pompe.
Request body :
Name
Pedrollo CPm 130
Power Kw
0.6
Current Ampere
3.5
Flow Rate Hmt8
15
Response :
Success
Yes
Pump Model Id
3
Message
Pump model created successfully
3ï¸âƒ£ NOUVEL ENDPOINT : PUT /api/config/pump-model/{id}
Modifie un modÃ¨le de pompe existant.
Request body :
Name
Pedrollo VXM 10/35 - V2
Power Kw
0.8
Current Ampere
5
Flow Rate Hmt8
20
Response :
Success
Yes
Message
Pump model updated successfully
4ï¸âƒ£ NOUVEL ENDPOINT : DELETE /api/config/pump-model/{id}
Supprime un modÃ¨le de pompe.
âš ï¸ ATTENTION : Ne pas permettre la suppression si le modÃ¨le est utilisÃ© par un channel.
VÃ©rification avant suppression :
SELECT COUNT(*) FROM channel_config WHERE pump_model_id = {id}
Si COUNT > 0 :
Success
No
Error
Cannot delete: pump model is used by X channel(s)
Si COUNT = 0 :
Success
Yes
Message
Pump model deleted successfully
5ï¸âƒ£ MODIFIER ENDPOINT : POST /api/config/device
Met Ã  jour TOUS les channels d'un device en une seule requÃªte.
Request body :
Device Id
shellypro4pm-a0dd6c9ef474
Device Name
Sagemcom
Channels
Item 1
Channel
switch:0
Name
PR1
Pump Model Id
1
Item 2
Channel
switch:1
Name
PR2
Pump Model Id
1
Item 3
Channel
switch:2
Name
PS
Pump Model Id
2
Comportement :
Transaction SQL (BEGIN/COMMIT)
Update device_name si modifiÃ©
Update TOUS les channels du device en une seule fois
Rollback si erreur
Response :
Success
Yes
Message
Configuration saved successfully
6ï¸âƒ£ MODIFIER ENDPOINT : GET /api/config/devices
Ajouter l'info pump_model dans la rÃ©ponse pour chaque channel.
Response :
Item 1
Device Id
shellypro4pm-a0dd6c9ef474
Device Name
Sagemcom
Channels
Item 1
Channel
switch:0
Name
PR1
Pump Model Id
1
Pump Model
Id
1
Name
Pedrollo VXM 10/35
Power Kw
0.75
Current Ampere
4.8
Flow Rate Hmt8
18
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ FRONTEND - PAGE 1 : Admin Device Config (/admin)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£ AJOUTER UN LIEN VERS LA PAGE DE GESTION DES POMPES
En haut de la page admin, ajouter :
<div class="admin-header">
  <h1>Configuration des devices</h1>
  <a href="/admin/pumps" class="btn-manage-pumps">
    ğŸ”§ GÃ©rer les modÃ¨les de pompes
  </a>
</div>
CSS :
.admin-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.btn-manage-pumps {
  padding: 10px 20px;
  background: #007bff;
  color: white;
  text-decoration: none;
  border-radius: 4px;
  font-weight: bold;
}

.btn-manage-pumps:hover {
  background: #0056b3;
}
2ï¸âƒ£ STRUCTURE HTML MODIFIÃ‰E
Pour chaque channel, ajouter un <select> avec les modÃ¨les de pompes.
<div class="device-config">
  <h3>shellypro4pm-a0dd6c9ef474</h3>
  
  <div class="config-row">
    <label>Nom device:</label>
    <input type="text" id="device-name" value="Sagemcom">
  </div>
  
  <div class="config-row">
    <label>switch:0:</label>
    <input type="text" id="ch0-name" value="PR1">
    <select id="ch0-model">
      <option value="">-- Aucun modÃ¨le --</option>
      <option value="1" selected>Pedrollo VXM 10/35 (0.75 kW, 4.8 A, 18 mÂ³/h)</option>
      <option value="2">Pedrollo DM/8 (0.55 kW, 3.2 A)</option>
    </select>
  </div>
  
  <div class="config-row">
    <label>switch:1:</label>
    <input type="text" id="ch1-name" value="PR2">
    <select id="ch1-model">
      <option value="">-- Aucun modÃ¨le --</option>
      <option value="1" selected>Pedrollo VXM 10/35 (0.75 kW, 4.8 A, 18 mÂ³/h)</option>
      <option value="2">Pedrollo DM/8 (0.55 kW, 3.2 A)</option>
    </select>
  </div>
  
  <div class="config-row">
    <label>switch:2:</label>
    <input type="text" id="ch2-name" value="PS">
    <select id="ch2-model">
      <option value="">-- Aucun modÃ¨le --</option>
      <option value="1">Pedrollo VXM 10/35 (0.75 kW, 4.8 A, 18 mÂ³/h)</option>
      <option value="2" selected>Pedrollo DM/8 (0.55 kW, 3.2 A)</option>
    </select>
  </div>
  
  <button class="btn-save" onclick="saveDeviceConfig('shellypro4pm-a0dd6c9ef474')">
    Enregistrer
  </button>
</div>
3ï¸âƒ£ JAVASCRIPT : Chargement et sauvegarde
async function saveDeviceConfig(deviceId) {
  const deviceName = document.getElementById('device-name').value;
  
  const channels = [
    {
      channel: 'switch:0',
      name: document.getElementById('ch0-name').value,
      pump_model_id: document.getElementById('ch0-model').value || null
    },
    {
      channel: 'switch:1',
      name: document.getElementById('ch1-name').value,
      pump_model_id: document.getElementById('ch1-model').value || null
    },
    {
      channel: 'switch:2',
      name: document.getElementById('ch2-name').value,
      pump_model_id: document.getElementById('ch2-model').value || null
    }
  ];
  
  const response = await fetch('/api/config/device', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      device_id: deviceId,
      device_name: deviceName,
      channels: channels
    })
  });
  
  if (response.ok) {
    alert('Configuration enregistrÃ©e avec succÃ¨s !');
  } else {
    alert('Erreur lors de la sauvegarde');
  }
}

function formatPumpOption(pump) {
  const flowInfo = pump.flow_rate_hmt8 
    ? `, ${pump.flow_rate_hmt8} mÂ³/h` 
    : '';
  return `${pump.name} (${pump.power_kw} kW, ${pump.current_ampere} A${flowInfo})`;
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ FRONTEND - PAGE 2 : Gestion des pompes (/admin/pumps)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£ STRUCTURE HTML COMPLÃˆTE
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des modÃ¨les de pompes</title>
  <link rel="stylesheet" href="/static/admin.css">
</head>
<body>
  <div class="container">
    <div class="page-header">
      <a href="/admin" class="btn-back">â† Retour Ã  l'admin</a>
      <h1>Gestion des modÃ¨les de pompes</h1>
    </div>

    <!-- FORMULAIRE CRÃ‰ATION/MODIFICATION -->
    <div class="pump-form-card">
      <h2 id="form-title">Ajouter un nouveau modÃ¨le</h2>
      <form id="pump-form">
        <input type="hidden" id="pump-id" value="">
        
        <div class="form-row">
          <label>Nom du modÃ¨le *</label>
          <input type="text" id="pump-name" required 
                 placeholder="Ex: Pedrollo VXM 10/35">
        </div>
        
        <div class="form-row">
          <label>Puissance (kW) *</label>
          <input type="number" id="pump-power" step="0.01" min="0" required 
                 placeholder="Ex: 0.75">
        </div>
        
        <div class="form-row">
          <label>IntensitÃ© Ã  230V (A) *</label>
          <input type="number" id="pump-current" step="0.1" min="0" required 
                 placeholder="Ex: 4.8">
        </div>
        
        <div class="form-row">
          <label>DÃ©bit Ã  HMT=8 (mÂ³/h)</label>
          <input type="number" id="pump-flow" step="0.1" min="0" 
                 placeholder="Ex: 18.0 (laisser vide si N/A)">
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-primary">Enregistrer</button>
          <button type="button" class="btn-cancel" onclick="resetForm()">Annuler</button>
        </div>
      </form>
    </div>

    <!-- LISTE DES POMPES -->
    <div class="pumps-list-card">
      <h2>ModÃ¨les existants</h2>
      <table id="pumps-table">
        <thead>
          <tr>
            <th>Nom</th>
            <th>Puissance (kW)</th>
            <th>IntensitÃ© (A)</th>
            <th>DÃ©bit (mÂ³/h)</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="pumps-tbody">
          <!-- Rempli dynamiquement -->
        </tbody>
      </table>
    </div>
  </div>

  <script src="/static/admin-pumps.js"></script>
</body>
</html>
2ï¸âƒ£ JAVASCRIPT : /static/admin-pumps.js
let pumps = [];

// Chargement initial
document.addEventListener('DOMContentLoaded', () => {
  loadPumps();
  
  document.getElementById('pump-form').addEventListener('submit', handleSubmit);
});

// Charger la liste des pompes
async function loadPumps() {
  const response = await fetch('/api/config/pump-models');
  pumps = await response.json();
  renderTable();
}

// Afficher le tableau
function renderTable() {
  const tbody = document.getElementById('pumps-tbody');
  
  if (pumps.length === 0) {
    tbody.innerHTML = '<tr><td colspan="5" style="text-align:center">Aucun modÃ¨le de pompe</td></tr>';
    return;
  }
  
  tbody.innerHTML = pumps.map(pump => `
    <tr>
      <td>${pump.name}</td>
      <td>${pump.power_kw}</td>
      <td>${pump.current_ampere}</td>
      <td>${pump.flow_rate_hmt8 || '-'}</td>
      <td class="actions">
        <button class="btn-edit" onclick="editPump(${pump.id})">âœï¸ Modifier</button>
        <button class="btn-delete" onclick="deletePump(${pump.id})">ğŸ—‘ï¸ Supprimer</button>
      </td>
    </tr>
  `).join('');
}

// Soumission du formulaire (crÃ©ation ou modification)
async function handleSubmit(e) {
  e.preventDefault();
  
  const pumpId = document.getElementById('pump-id').value;
  const data = {
    name: document.getElementById('pump-name').value,
    power_kw: parseFloat(document.getElementById('pump-power').value),
    current_ampere: parseFloat(document.getElementById('pump-current').value),
    flow_rate_hmt8: document.getElementById('pump-flow').value 
      ? parseFloat(document.getElementById('pump-flow').value) 
      : null
  };
  
  let response;
  if (pumpId) {
    // Modification
    response = await fetch(`/api/config/pump-model/${pumpId}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
  } else {
    // CrÃ©ation
    response = await fetch('/api/config/pump-model', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
  }
  
  if (response.ok) {
    alert(pumpId ? 'ModÃ¨le modifiÃ© avec succÃ¨s !' : 'ModÃ¨le crÃ©Ã© avec succÃ¨s !');
    resetForm();
    loadPumps();
  } else {
    const error = await response.json();
    alert('Erreur : ' + error.error);
  }
}

// Modifier une pompe
function editPump(id) {
  const pump = pumps.find(p => p.id === id);
  if (!pump) return;
  
  document.getElementById('form-title').textContent = 'Modifier le modÃ¨le';
  document.getElementById('pump-id').value = pump.id;
  document.getElementById('pump-name').value = pump.name;
  document.getElementById('pump-power').value = pump.power_kw;
  document.getElementById('pump-current').value = pump.current_ampere;
  document.getElementById('pump-flow').value = pump.flow_rate_hmt8 || '';
  
  // Scroll vers le formulaire
  document.getElementById('pump-form').scrollIntoView({ behavior: 'smooth' });
}

// Supprimer une pompe
async function deletePump(id) {
  if (!confirm('ÃŠtes-vous sÃ»r de vouloir supprimer ce modÃ¨le ?')) return;
  
  const response = await fetch(`/api/config/pump-model/${id}`, {
    method: 'DELETE'
  });
  
  if (response.ok) {
    alert('ModÃ¨le supprimÃ© avec succÃ¨s !');
    loadPumps();
  } else {
    const error = await response.json();
    alert('Erreur : ' + error.error);
  }
}

// RÃ©initialiser le formulaire
function resetForm() {
  document.getElementById('form-title').textContent = 'Ajouter un nouveau modÃ¨le';
  document.getElementById('pump-id').value = '';
  document.getElementById('pump-form').reset();
}
3ï¸âƒ£ CSS : Styles pour la page pumps
Ajouter dans /static/admin.css :
/* Page header */
.page-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 30px;
}

.btn-back {
  padding: 10px 20px;
  background: #6c757d;
  color: white;
  text-decoration: none;
  border-radius: 4px;
  font-weight: bold;
}

.btn-back:hover {
  background: #5a6268;
}

/* Form card */
.pump-form-card {
  background: white;
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  margin-bottom: 30px;
}

.pump-form-card h2 {
  margin-top: 0;
  color: #333;
}

.form-row {
  margin-bottom: 20px;
}

.form-row label {
  display: block;
  font-weight: bold;
  margin-bottom: 5px;
  color: #555;
}

.form-row input {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.form-actions {
  display: flex;
  gap: 10px;
  margin-top: 30px;
}

.btn-primary {
  padding: 12px 30px;
  background: #28a745;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
}

.btn-primary:hover {
  background: #218838;
}

.btn-cancel {
  padding: 12px 30px;
  background: #6c757d;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
}

.btn-cancel:hover {
  background: #5a6268;
}

/* Pumps list */
.pumps-list-card {
  background: white;
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.pumps-list-card h2 {
  margin-top: 0;
  color: #333;
}

#pumps-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}

#pumps-table th {
  background: #f8f9fa;
  padding: 12px;
  text-align: left;
  border-bottom: 2px solid #dee2e6;
  font-weight: bold;
}

#pumps-table td {
  padding: 12px;
  border-bottom: 1px solid #dee2e6;
}

#pumps-table tbody tr:hover {
  background: #f8f9fa;
}

.actions {
  display: flex;
  gap: 10px;
}

.btn-edit {
  padding: 6px 12px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.btn-edit:hover {
  background: #0056b3;
}

.btn-delete {
  padding: 6px 12px;
  background: #dc3545;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.btn-delete:hover {
  background: #c82333;
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST POST-BUILD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Backend :
â˜ Table pump_models crÃ©Ã©e avec toutes les colonnes
â˜ DonnÃ©es initiales insÃ©rÃ©es (VXM 10/35, DM/8)
â˜ Colonne pump_model_id ajoutÃ©e Ã  channel_config
â˜ Endpoint GET /api/config/pump-models
â˜ Endpoint POST /api/config/pump-model (crÃ©ation)
â˜ Endpoint PUT /api/config/pump-model/{id} (modification)
â˜ Endpoint DELETE /api/config/pump-model/{id} (suppression avec vÃ©rification)
â˜ Endpoint POST /api/config/device (update multiple channels)
â˜ Endpoint GET /api/config/devices (retourne pump_model)
Frontend - Page Admin (/admin) :
â˜ Lien "GÃ©rer les modÃ¨les de pompes" en haut de page
â˜ <select> ajoutÃ©s pour chaque channel
â˜ Chargement des modÃ¨les depuis l'API
â˜ Format correct : "Nom (X kW, Y A, Z mÂ³/h)" ou "Nom (X kW, Y A)"
â˜ UN SEUL bouton "Enregistrer" par device
â˜ Sauvegarde de tous les channels en une requÃªte
Frontend - Page Pumps (/admin/pumps) :
â˜ Lien "Retour Ã  l'admin" fonctionnel
â˜ Formulaire de crÃ©ation avec tous les champs
â˜ Table listant tous les modÃ¨les
â˜ Bouton "Modifier" prÃ©-remplit le formulaire
â˜ Bouton "Supprimer" avec confirmation
â˜ Suppression bloquÃ©e si modÃ¨le utilisÃ©
â˜ Messages de succÃ¨s/erreur aprÃ¨s chaque action
Tests :
â˜ CrÃ©er une nouvelle pompe â†’ Visible dans la liste et les selects
â˜ Modifier une pompe existante â†’ Changements visibles partout
â˜ Supprimer une pompe non utilisÃ©e â†’ Suppression OK
â˜ Supprimer une pompe utilisÃ©e â†’ Erreur affichÃ©e
â˜ SÃ©lectionner un modÃ¨le dans l'admin device â†’ Enregistrement OK
â˜ Naviguer entre /admin et /admin/pumps â†’ Liens fonctionnels
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ POINTS D'ATTENTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VALIDATION DES DONNÃ‰ES
Champs obligatoires : name, power_kw, current_ampere
flow_rate_hmt8 optionnel (NULL si non renseignÃ©)
Valeurs numÃ©riques > 0
PROTECTION SUPPRESSION
VÃ©rifier avant chaque DELETE que le modÃ¨le n'est pas utilisÃ© par un channel.
UX/UI
Messages clairs aprÃ¨s chaque action
Formulaire se rÃ©initialise aprÃ¨s crÃ©ation
Scroll automatique vers le formulaire en mode modification
Confirmation avant suppression
TRANSACTION SQL
Endpoint POST /api/config/device utilise BEGIN/COMMIT pour update atomique.
FORMAT D'AFFICHAGE
Avec dÃ©bit : "Pedrollo VXM 10/35 (0.75 kW, 4.8 A, 18 mÂ³/h)"
Sans dÃ©bit : "Pedrollo DM/8 (0.55 kW, 3.2 A)"

---

## ğŸ¯ RÃ‰SUMÃ‰

### **2 pages** :
1. âœ… `/admin` â†’ Configuration devices avec selects modÃ¨les + lien vers gestion pompes
2. âœ… `/admin/pumps` â†’ CRUD complet des modÃ¨les de pompes

### **Endpoints backend** :
- âœ… GET `/api/config/pump-models` (liste)
- âœ… POST `/api/config/pump-model` (crÃ©er)
- âœ… PUT `/api/config/pump-model/{id}` (modifier)
- âœ… DELETE `/api/config/pump-model/{id}` (supprimer avec vÃ©rification)
- âœ… POST `/api/config/device` (update multi-channels)
- âœ… GET `/api/config/devices` (avec pump_model)

### **FonctionnalitÃ©s** :
- âœ… CrÃ©ation de nouveaux modÃ¨les
- âœ… Modification des modÃ¨les existants
- âœ… Suppression (protÃ©gÃ©e si utilisÃ©)
- âœ… SÃ©lection du modÃ¨le par channel
- âœ… UN SEUL bouton Enregistrer par device

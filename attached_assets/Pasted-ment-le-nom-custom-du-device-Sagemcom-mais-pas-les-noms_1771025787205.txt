ment le nom custom du device ("Sagemcom") mais pas les noms des canaux dans le dropdown de filtres.
Le dropdown affiche "Canal 0", "Canal 1", "Canal 2" au lieu de "Pompe PR 1", "Pompe PS", "Surpresseur".

CAUSE
=====
Le dropdown "Canal" est hardcodÃ© avec des labels statiques. Il ne rÃ©cupÃ¨re pas les noms custom depuis l'API.

SOLUTION
========
Modifier web/dashboard.py pour :
1. Charger les configs au dÃ©marrage
2. Remplir le dropdown "Canal" avec les noms custom
3. Garder les valeurs techniques (switch:0) pour les requÃªtes API

SPÃ‰CIFICATIONS
===============

Modifier web/dashboard.py dans la section HTML du dropdown Canal :

AVANT (ligne ~110) :
<div class="filter-group">
    <label for="channel-filter">ğŸ’§ Canal</label>
    <select id="channel-filter">
        <option value="">Tous les canaux</option>
        <option value="switch:0">Canal 0</option>
        <option value="switch:1">Canal 1</option>
        <option value="switch:2">Canal 2</option>
    </select>
</div>

APRÃˆS :
<div class="filter-group">
    <label for="channel-filter">ğŸ’§ Canal</label>
    <select id="channel-filter">
        <option value="">Tous les canaux</option>
        <!-- Options chargÃ©es dynamiquement depuis l'API -->
    </select>
</div>

Modifier web/dashboard.py dans le JavaScript (aprÃ¨s DOMContentLoaded) :

Ajouter cette nouvelle fonction aprÃ¨s loadCycles() :

async function loadChannelOptions() {
    try {
        // RÃ©cupÃ©rer les configs
        const response = await fetch('/api/config/devices');
        if (!response.ok) return;
        
        const data = await response.json();
        const select = document.getElementById('channel-filter');
        
        // Garder "Tous les canaux"
        select.innerHTML = '<option value="">Tous les canaux</option>';
        
        // Si on a des devices avec configs
        if (data.devices && data.devices.length > 0) {
            // RÃ©cupÃ©rer le device_id du dashboard (depuis les donnÃ©es chargÃ©es ou config)
            // Pour l'instant, on prend le premier device (Ã  amÃ©liorer si multi-device)
            const device = data.devices[0];
            const deviceId = device.device_id;
            const channelNames = device.channel_names || {};
            
            // Ajouter les options avec noms custom
            device.channels.forEach(channel => {
                const option = document.createElement('option');
                option.value = channel; // Valeur technique (switch:0)
                option.textContent = channelNames[channel] || channel; // Nom custom ou fallback
                select.appendChild(option);
            });
        } else {
            // Fallback si pas de configs : options par dÃ©faut
            ['switch:0', 'switch:1', 'switch:2'].forEach(ch => {
                const option = document.createElement('option');
                option.value = ch;
                option.textContent = ch;
                select.appendChild(option);
            });
        }
    } catch (e) {
        console.error('Error loading channel options:', e);
        // Fallback en cas d'erreur
        const select = document.getElementById('channel-filter');
        select.innerHTML = `
            <option value="">Tous les canaux</option>
            <option value="switch:0">switch:0</option>
            <option value="switch:1">switch:1</option>
            <option value="switch:2">switch:2</option>
        `;
    }
}

Modifier DOMContentLoaded pour appeler loadChannelOptions() :

document.addEventListener('DOMContentLoaded', () => {
    // DÃ©finir dates par dÃ©faut (45 derniers jours)
    const today = new Date();
    const startDate = new Date(today);
    startDate.setDate(today.getDate() - 45);
    
    document.getElementById('start-date').valueAsDate = startDate;
    document.getElementById('end-date').valueAsDate = today;
    
    // Charger les options des canaux avec noms custom
    loadChannelOptions(); // ğŸ†• AJOUTER CETTE LIGNE
    
    // Charger donnÃ©es
    loadCycles();
});

AMÃ‰LIORATION OPTIONNELLE : Support multi-device
================================================

Si tu as plusieurs devices, tu veux que le dropdown "Canal" change selon le device sÃ©lectionnÃ©.

Modifier le HTML pour ajouter un dropdown "Device" (si pas dÃ©jÃ  fait) :

<div class="filter-group">
    <label for="device-filter">ğŸ”Œ Device</label>
    <select id="device-filter" onchange="updateChannelOptions()">
        <option value="">Tous les devices</option>
        <!-- Options chargÃ©es dynamiquement -->
    </select>
</div>

Ajouter cette fonction JavaScript :

async function loadDeviceOptions() {
    try {
        const response = await fetch('/api/config/devices');
        if (!response.ok) return;
        
        const data = await response.json();
        const select = document.getElementById('device-filter');
        
        select.innerHTML = '<option value="">Tous les devices</option>';
        
        data.devices.forEach(device => {
            const option = document.createElement('option');
            option.value = device.device_id;
            option.textContent = device.device_name || device.device_id;
            select.appendChild(option);
        });
    } catch (e) {
        console.error('Error loading device options:', e);
    }
}

function updateChannelOptions() {
    // Recharger les options de canaux selon le device sÃ©lectionnÃ©
    loadChannelOptions();
}

Modifier loadChannelOptions() pour filtrer selon le device sÃ©lectionnÃ© :

async function loadChannelOptions() {
    try {
        const response = await fetch('/api/config/devices');
        if (!response.ok) return;
        
        const data = await response.json();
        const select = document.getElementById('channel-filter');
        const deviceFilter = document.getElementById('device-filter');
        const selectedDeviceId = deviceFilter ? deviceFilter.value : '';
        
        select.innerHTML = '<option value="">Tous les canaux</option>';
        
        if (data.devices && data.devices.length > 0) {
            // Filtrer par device si sÃ©lectionnÃ©
            const devices = selectedDeviceId 
                ? data.devices.filter(d => d.device_id === selectedDeviceId)
                : data.devices;
            
            // Pour chaque device (ou juste celui sÃ©lectionnÃ©)
            devices.forEach(device => {
                const channelNames = device.channel_names || {};
                
                device.channels.forEach(channel => {
                    const option = document.createElement('option');
                    option.value = channel;
                    
                    // Si multi-device, prÃ©fixer avec le nom du device
                    const displayName = channelNames[channel] || channel;
                    option.textContent = data.devices.length > 1 && !selectedDeviceId
                        ? `[${device.device_name || device.device_id}] ${displayName}`
                        : displayName;
                    
                    select.appendChild(option);
                });
            });
        }
    } catch (e) {
        console.error('Error loading channel options:', e);
    }
}

Appeler loadDeviceOptions() au chargement :

document.addEventListener('DOMContentLoaded', () => {
    // ... dates ...
    
    loadDeviceOptions();  // ğŸ†• Charger devices
    loadChannelOptions(); // Charger canaux
    loadCycles();
});

TESTS
=====
1. âœ… Recharger /dashboard
2. âœ… Dropdown "Canal" affiche :
   - "Tous les canaux"
   - "Pompe PR 1" (au lieu de "Canal 0")
   - "Pompe PS" (au lieu de "Canal 2")
   - "Surpresseur" (au lieu de "Canal 3")
3. âœ… SÃ©lectionner "Pompe PR 1" â†’ filtre sur switch:0 (valeur technique)
4. âœ… Tableau affiche les cycles filtrÃ©s
5. âœ… Les noms custom s'affichent aussi dans le tableau

RÃ‰SULTAT ATTENDU
================
Dropdown "Canal" :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tous les canaux     â–¼â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Pompe PR 1           â”‚ â† Au lieu de "Canal 0"
â”‚ Ex: Pompe PR         â”‚ â† Si pas de nom, affiche "switch:1"
â”‚ Pompe PS             â”‚ â† Au lieu de "Canal 2"
â”‚ Surpresseur          â”‚ â† Au lieu de "Canal 3"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

La valeur technique (switch:0) est utilisÃ©e pour filtrer l'API, mais l'affichage montre le nom custom.
ğŸ¯ RÃ‰SUMÃ‰ DU PROBLÃˆME
Avant :
Dropdown hardcodÃ© avec "Canal 0", "Canal 1", "Canal 2"
Noms custom ignorÃ©s
AprÃ¨s le fix :
Dropdown chargÃ© dynamiquement depuis /api/config/devices
Affiche "Pompe PR 1", "Pompe PS", "Surpresseur"
Valeurs techniques (switch:0) utilisÃ©es en backend